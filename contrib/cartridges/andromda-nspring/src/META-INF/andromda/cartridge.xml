<cartridge>

    <templateEngine>
        <macrolibrary name="templates/spring/RenderPreconditions.vm"/>
        <!-- cartridge-macrolibrary merge-point-->
    </templateEngine>

    <templateObject name="stringUtils" className="org.andromda.utils.StringUtilsHelper"/>
    <templateObject name="springUtils" className="org.andromda.cartridges.nspring.SpringUtils"/>
    <templateObject name="escapeUtils" className="org.apache.commons.lang.StringEscapeUtils"/>
    <templateObject name="hibernateUtils" className="org.andromda.cartridges.nspring.SpringHibernateUtils">
        <property reference="hibernateVersion"/>
    </templateObject>
    <!-- cartridge-templateObject merge-point-->

    <property reference="driver"/>
    <property reference="username"/>
    <property reference="password"/>
    <property reference="connectionUrl"/>
    <property reference="dataSource"/>
    <property reference="hibernatePoolSize"/>
    <property reference="hibernateTransactionManagerStrategy"/>
    <property reference="hibernateUserTransactionName"/>
    <property reference="hibernateTransactionManagerLookup"/>
    <property reference="hibernateUseOuterJoin"/>
    <property reference="hibernateShowSql"/>
    <property reference="hibernateJndiName"/>
    <property reference="hibernateDialect"/>
    <property reference="hibernateDefaultSchema"/>
    <property reference="hibernateMaxFetchDepth"/>
    <property reference="hibernateJdbcFetchSize"/>
    <property reference="hibernateJdbcBatchSize"/>
    <property reference="hibernateConnectionReleaseMode"/>
    <property reference="hibernateEnableCache"/>
    <property reference="hibernateJdbcUseScrollableResultSet"/>
    <property reference="hibernateJdbcUseStreamsForBinary"/>
    <property reference="hibernateHbm2DDLAuto"/>
    <property reference="hibernateQuerySubstitutions"/>
    <property reference="hibernateCacheProvider"/>
    <property reference="hibernateQueryCacheFactory"/>
    <property reference="applicationContext"/>
    <property reference="applicationContextManageable"/>
    <property reference="applicationContextDataSource"/>
    <property reference="applicationContextLocalDataSource"/>
    <property reference="applicationContextRemoteEjb"/>
    <property reference="applicationContextLocalEjb"/>
    <property reference="applicationContextServer"/>
    <property reference="applicationContextClient"/>
    <property reference="beanRefFactory"/>
    <property reference="beanRefFactoryId"/>
    <property reference="beanRefFactoryEjbId"/>
    <property reference="transactionManager"/>
    <property reference="localTransactionManager"/>
    <property reference="userTransactionName"/>
    <property reference="transactionManagerName"/>
    <property reference="sessionFactory"/>
    <property reference="serviceLocatorName"/>
    <property reference="springTypesPackage"/>
    <property reference="springPresentationTypesPackage"/>
    <property reference="manageableServiceLocatorName"/>
    <property reference="clientServiceLocatorName"/>
    <property reference="clientServiceLocatorClassloaderSwitching"/>
    <property reference="clientExceptionHandlingAdviceName"/>
    <property reference="criteriaSearchBaseName"/>
    <property reference="principalStoreName"/>
    <property reference="openSessionInViewFilterName"/>
    <property reference="ejbViewType"/>
    <property reference="ejbRemoteProxyFactoryBean"/>
    <property reference="ejbLocalProxyFactoryBean"/>
    <property reference="ejbSessionBeanBaseInterfaceLocal"/>
    <property reference="ejbSessionBeanBaseInterfaceRemote"/>
    <property reference="ejbSessionBeanBaseClass"/>
    <property reference="ejbRemoteUrlPackagePrefixes"/>
    <property reference="ejbRemoteProviderUrl"/>
    <property reference="ejbRemoteInitialContextFactory"/>
    <property reference="enableSpringTransactionsWhenEjbsEnabled"/>
    <property reference="ejbTransactionsEnabled"/>
    <property reference="serviceInterceptors"/>
    <property reference="serviceRemotePort"/>
    <property reference="serviceRemoteContext"/>
    <property reference="serviceRemoteServer"/>
    <property reference="securityRealm"/>
    <property reference="jndiDataSourceClass"/>
    <property reference="jdbcDataSourceClass"/>
    <property reference="jdbcDataSourceDestroyMethod"/>
    <property reference="parameterRequiredCheck"/>
    <property reference="xmlEncoding"/>
    <property reference="session-ejbs"/>
    <property reference="advice-impls"/>
    <property reference="daos"/>
    <property reference="enableDaoPropertiesCreateMethod"/>
    <property reference="evictEntitiesOnTransformation"/>
    <property reference="acegiServiceSecurity"/>
    <property reference="acegiServiceSecurityInterceptor"/>
    <property reference="acegiServiceAccessDecisionManager"/>
    <property reference="acegiServiceDecisionVoter"/>
    <property reference="acegiRolePrefix"/>
    <property reference="acegiAuthenticationManager"/>
    <property reference="acegiRunAsManager"/>
    <!-- cartridge-property merge-point -->

    <!-- cartridge-resource merge-point -->
    <template
        path="templates/nspring/NSpringDaoFactory.vsl"
        outputPattern="$generatedFile"
        outlet="daos"
        overwrite="true"
        outputToSingleFile="true"
        outputOnEmptyElements="false">
        <modelElements variable="entities">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringEntity"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringDaoInterface.vsl"
        outputPattern="$generatedFile"
        outlet="daos"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringEntity"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringHibernateDaoBase.vsl"
        outputPattern="$generatedFile"
        outlet="daos"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringEntity"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringHibernateDaoImpl.vsl"
        outputPattern="$generatedFile"
        outlet="daos"
        overwrite="true">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringEntity">
                    <property name="daoImplementationRequired">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringHibernateDaoImpl.vsl"
        outputPattern="$generatedFile"
        outlet="dao-impls"
        overwrite="false">
        <modelElements variable="entity">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringEntity">
                    <property name="daoImplementationRequired"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringServiceInterface.vsl"
        outputPattern="$generatedFile"
        outlet="service-interfaces"
        overwrite="true">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringService">
                    <property name="configonly">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringServiceBase.vsl"
        outputPattern="$generatedFile"
        outlet="services"
        overwrite="true">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringService">
                    <property name="configonly">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/nspring/NSpringServiceImpl.vsl"
        outputPattern="$generatedFile"
        outlet="service-impls"
        overwrite="false">
        <modelElements variable="service">
            <modelElement>
                <type name="org.andromda.cartridges.nspring.metafacades.SpringService">
                    <property name="configonly">false</property>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- cartridge-template merge-point -->

</cartridge>