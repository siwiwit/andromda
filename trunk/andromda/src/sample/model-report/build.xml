<project name="model-report" default="report">

   <property file="build.properties" />
   
   <!-- directories where build output is written -->
   <property name="build.dir" value="build/"/>
   <property name="classes.dir" value="${build.dir}/classes/"/>
   <property name="output.dir" value="${build.dir}/output/"/>
   
   <target name="clean">
     <delete dir="${build.dir}"/>
   </target>
   
   <target name="init">
     <mkdir dir="${output.dir}"/>
     <mkdir dir="${classes.dir}"/>
   </target>
   
   <path id="classpath">
   	  <pathelement path="${build.classpath}"/>
   	  <pathelement location="src/andromda-cartridge"/>
   	  <pathelement location="${classes.dir}"/>
   </path>

   <target name="compile" depends="init">
     <javac srcdir="src/java"
         destdir="${classes.dir}"
         classpath="${build.classpath}"/>
   </target>
   
   <target name="report" depends="compile,init">
   
   		<echo message="build.classpath =${build.classpath}" />
   		
        <taskdef name="andromda"
                 classname="org.andromda.core.anttasks.AndroMDAGenTask"
                 classpathref="classpath"/>

        <andromda basedir="."
                 modelURL="${model.url}"
                 lastModifiedCheck="false"
                 typeMappings="${andromda.home}/src/xml/TypeMapping.xml">
          
          <repository transformClassname="ReportHelper"/>
                 
          <outlet cartridge="mycartridge" outlet="report" dir="${output.dir}" />
          
        </andromda>
        
    </target>
    
</project>