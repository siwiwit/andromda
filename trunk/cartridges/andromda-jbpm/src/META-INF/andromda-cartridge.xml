<cartridge>

    <templateEngine>
        <macrolibrary name="templates/jbpm/definitions/process-definition.xml.vm"/>
        <!-- cartridge-macrolibrary merge-point-->
    </templateEngine>

    <!-- define the template objects that are made available to the template -->
    <templateObject name="stringUtils" className="org.andromda.core.common.StringUtilsHelper"/>
    <!-- cartridge-templateObject merge-point-->

    <!-- cartridge-property merge-point -->

    <!-- cartridge-resource merge-point -->

    <!-- process templates on model elements -->
    <template
        path="templates/jbpm/definitions/process-definition.xml.vsl"
        outputPattern="$generatedFile"
        outlet="definitions"
        overwrite="true"
        generateEmptyFiles="false">
        <modelElements variable="processDefinition">
            <modelElement>
                <type name="org.andromda.cartridges.jbpm.metafacades.JBpmProcessDefinition"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jbpm/handlers/GenericHandler.java.vsl"
        outputPattern="$generatedFile"
        outlet="handlers"
        overwrite="true">
        <modelElements variable="handler">
            <modelElement>
                <type name="org.andromda.cartridges.jbpm.metafacades.JBpmHandler"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jbpm/handlers/GenericHandlerImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="handler-impls"
        overwrite="false">
        <modelElements variable="handler">
            <modelElement>
                <type name="org.andromda.cartridges.jbpm.metafacades.JBpmHandler"/>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jbpm/handlers/DecisionHandler.java.vsl"
        outputPattern="$generatedFile"
        outlet="handlers"
        overwrite="true">
        <modelElements variable="decision">
            <modelElement>
                <type name="org.andromda.cartridges.jbpm.metafacades.JBpmPseudostate">
                    <property name="decisionPoint"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <template
        path="templates/jbpm/handlers/DecisionHandlerImpl.java.vsl"
        outputPattern="$generatedFile"
        outlet="handler-impls"
        overwrite="false">
        <modelElements variable="decision">
            <modelElement>
                <type name="org.andromda.cartridges.jbpm.metafacades.JBpmPseudostate">
                    <property name="decisionPoint"/>
                </type>
            </modelElement>
        </modelElements>
    </template>

    <!-- cartridge-template merge-point -->

</cartridge>