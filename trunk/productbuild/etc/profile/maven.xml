<project default="xml.zip:install"
         xmlns:ant="jelly:ant"
         xmlns:j="jelly:core"
         xmlns:artifact="artifact">

    <!-- ===================================================================
         Install the model into the repository
         =================================================================== -->
	<goal name="xml.zip:install" prereqs="xml.zip:prepare">	
        <artifact:install
            artifact="${maven.xml.zip.final.name}.xml.zip"
            type="xml.zip"
            project="${pom}"/> 
     </goal>
      
    <!-- ===================================================================
         Deploy the model into the remote repository
         =================================================================== -->
	<goal name="xml.zip:deploy" prereqs="xml.zip:prepare"> 	
        <artifact:deploy
            artifact="${maven.xml.zip.final.name}.xml.zip"
            type="xml.zip"
            project="${pom}"/> 
	</goal>
 
    <!-- ===================================================================
         Prepare the xml.zip for install/deploy
         =================================================================== --> 	
	<goal name="xml.zip:prepare">
    	<j:set var="maven.xml.zip.final.name" 
              value="${maven.build.dir}/${maven.final.name}"/>
        <j:set var="modelXml" value="andromda-profile.xml"/>
        <ant:unzip 
            src="${maven.src.dir}/uml/${modelXml}.zip" 
            dest="${maven.build.dir}"/>
        <ant:move
            file="${maven.build.dir}/${modelXml}"
            tofile="${maven.xml.zip.final.name}.xml"/>
        <ant:zip destfile="${maven.xml.zip.final.name}.xml.zip"
                 basedir="${maven.build.dir}"
                 includes="*.xml"/>	
    </goal>
            
</project>
