<?xml version="1.0"?>

<!-- Digester rules used to load an AndroMDApp instance by the Apache Digester -->

<digester-rules>

    <pattern value="andromdapp">

        <object-create-rule classname="org.andromda.andromdapp.AndroMDAppType"/>

        <set-properties-rule>

            <alias attr-name="type" prop-name="type"/>
            
            <alias attr-name="root" prop-name="root"/>

        </set-properties-rule>
        
        <pattern value="resourceLocations/location">
                
            <call-method-rule methodname="addResourceLocation" paramcount="1" paramtypes="java.lang.String"/>

            <call-param-rule paramnumber="0"/>

        </pattern>
        
        <pattern value="templateEngine">

            <set-properties-rule>
                
                 <alias attr-name="className" prop-name="templateEngineClass"/>
                
                 <alias attr-name="patterns" prop-name="templatePatterns"/>
                
            </set-properties-rule>

            <pattern value="macrolibrary">

                <call-method-rule methodname="addMacrolibrary" paramcount="1" paramtypes="java.lang.String"/>

                <call-param-rule attrname="name" paramnumber="0" />

             </pattern>

        </pattern>

        <pattern value="prompts/prompt">

            <object-create-rule classname="org.andromda.andromdapp.Prompt"/>

            <set-properties-rule>

                <alias attr-name="id" prop-name="id"/>
                
                <alias attr-name="required" prop-name="required"/>
                
                <alias attr-name="setResponseAsTrue" prop-name="setResponseAsTrue"/>

            </set-properties-rule>

            <pattern value="text">

                <call-method-rule methodname="setText" paramcount="1" paramtypes="java.lang.String"/>

                <call-param-rule paramnumber="0"/>

            </pattern>
            
            <pattern value="preconditions/precondition">

                <object-create-rule classname="org.andromda.andromdapp.Condition"/>

                <pattern value="prompt">

                    <set-properties-rule>
        
                         <alias attr-name="id" prop-name="id"/>
        
                    </set-properties-rule>
                    
                    <pattern value="equal">
    
                        <call-method-rule methodname="setEqual" paramcount="1" paramtypes="java.lang.String"/>
    
                        <call-param-rule paramnumber="0"/>
    
                    </pattern>
                    
                    <pattern value="notEqual">
    
                        <call-method-rule methodname="setNotEqual" paramcount="1" paramtypes="java.lang.String"/>
    
                        <call-param-rule paramnumber="0"/>
    
                    </pattern>

                </pattern>

                <set-next-rule methodname="addPrecondition" />

            </pattern>
            
            <pattern value="responses/response">

                <call-method-rule methodname="addResponse" paramcount="2" paramtypes="java.lang.String,java.lang.String"/>

                <call-param-rule paramnumber="0"/>
                
                <call-param-rule attrname="type" paramnumber="1" />

            </pattern>

            <pattern value="conditions/condition">

                <object-create-rule classname="org.andromda.andromdapp.Condition"/>

                <pattern value="setPrompt">

                    <call-method-rule methodname="addPromptValue" paramcount="2" paramtypes="java.lang.String,java.lang.String"/>

                    <call-param-rule attrname="id" paramnumber="0" />

                    <call-param-rule paramnumber="1"/>

                </pattern>

                <pattern value="equal">

                    <call-method-rule methodname="setEqual" paramcount="1" paramtypes="java.lang.String"/>

                    <call-param-rule paramnumber="0"/>

                </pattern>

                <pattern value="notEqual">

                    <call-method-rule methodname="setNotEqual" paramcount="1" paramtypes="java.lang.String"/>

                    <call-param-rule paramnumber="0"/>

                </pattern>

                 <set-next-rule methodname="addCondition" />

             </pattern>

             <set-next-rule methodname="addPrompt" />

        </pattern>

    </pattern>

</digester-rules>