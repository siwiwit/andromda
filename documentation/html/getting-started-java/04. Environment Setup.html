<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Environment Setup</title>
</head>
<body>
    <h2>Environment Setup</h2>
    <!------------------------- Intro Text ------------------------->
    <p>
        This section provides a step-by-step guide to set up your development environment
        for AndroMDA. We assume that you are working on a Windows platform.
    </p>
    <!------------------------- Main Text ------------------------->
    <p>
        Throughout this section you will install various programs. The recommended installation
        paths for these programs and other required directories are listed below. Please
        feel free to change the installation paths depending on your configuration and personal
        preferences. For example, you may choose to install programs on the D: drive instead
        of the C: drive. However, note that some programs don't work well if there are spaces
        in their pathname. So, try to stick to the suggestions below as much as possible.
    </p>
    <table>
        <tr>
            <th>Recommended Path</th>
            <th>Purpose</th>
        </tr>
        <tr>
            <td><code>C:\Documents and Settings\<strong>your user name</strong>\.m2\repository</code>
            </td>
            <td>Maven local repository </td>
        </tr>
        <tr>
            <td><code>C:\Program Files\Apache Software Foundation\maven-2.0.8</code> </td>
            <td>Maven program </td>
        </tr>
        <tr>
            <td><code>C:\Program Files\Java\jdk1.6.0_xx</code> </td>
            <td>Java Development Kit (xx is the update number) </td>
        </tr>
        <tr>
            <td><code>C:\Program Files\Java\jre1.6.0_xx</code> </td>
            <td>Java Runtime Engine (xx is the update number) </td>
        </tr>
        <tr>
            <td><code>C:\Program Files\MySQL\MySQL Server 5.0</code> </td>
            <td>MySQL database server </td>
        </tr>
        <tr>
            <td><code>C:\eclipse</code> </td>
            <td>Eclipse IDE (optional) </td>
        </tr>
        <tr>
            <td><code>C:\jboss-4.0.5</code> </td>
            <td>JBoss Application Server </td>
        </tr>
    </table>
    <p>
        You will also be asked to set up several environment variables. Please set these
        as SYSTEM variables using the Control Panel (Control Panel > System > Advanced >
        Environment Variables). Note that if you change the installation path of any program
        then you must make sure that the associated environment variable is changed accordingly.
    </p>
    <h3>Prepare the Development Environment</h3>
    <p>
        To start developing with AndroMDA, prepare your development environment by following
        the steps shown below.
    </p>
    <h4>Install Java</h4>
    <p>
        Install J2SE Development Kit 6 (JDK 6) from <a href="http://java.sun.com/javase/downloads/index.jsp"
            target="_blank">here</a>. This is the preferred version of the JDK for AndroMDA.
        We also support JDK versions 1.4 and 1.5. However if you decide to use JDK version
        1.4, you will have to make some modifications to the tutorial as it uses features
        of the later JDKs.
    </p>
    <p>
        Make sure that the <code>JAVA_HOME</code> environment variable is pointing to the
        directory where you installed the JDK. It is possible you have this variable set
        already, but just to make sure here's how to check.
    </p>
    <ol>
        <li>Go to the control panel and double-click on <code>System</code>. (If you are a Windows
            XP user, it's possible you have to open <code>Performance and Maintenance</code>
            before you will see the <code>System</code> icon.)</li>
        <li>Go to the <code>Advanced</code> tab and click on <code>Environment Variables</code>
        </li>
        <li>Make sure you have set the <code>JAVA_HOME</code> variable and that it is pointing
            to the directory where you installed the JDK. If not, add/edit the variable and
            set it to the correct value (e.g. C:\Program Files\Java\jdk1.6.0_06).</li>
    </ol>
    <h4>Install Maven</h4>
    <p>
        <a href="http://maven.apache.org/" target="_blank">Maven</a> is our preferred tool
        for building and deploying applications generated by AndroMDA. Based on the concept
        of a project object model (POM), Maven can manage a project's build, reporting,
        and documentation from a central piece of information. If you are familiar with
        Ant, Maven is very similar except that it contains additional functionality:
    </p>
    <ol>
        <li>A hierarchical build environment, where properties configured in a POM file (pom.xml)
            flow down to POM files of all child projects.</li>
        <li>Standardized build tasks (clean, build, install, deploy, etc.)</li>
        <li>Dependency specifications for build and deploy tasks - for all internal and external
            libraries; tied to a specific released versions of dependent libraries</li>
        <li>A repository containing all versioned dependencies. This repository is used during
            the build and deploy processes (very similar to the .NET Global Assembly Cache concept).</li>
    </ol>
    <p>
        Install Maven 2.0.8 by following the steps below. (Note that as of this writing,
        the latest version of Maven is 2.0.9, but it has a minor issue with AndroMDA 3.3 
        project generator. 
        - Advanced users may wish to install Maven 2.0.9, but you will have to manually 
        change the model file path from <code>file:${project.build.sourceDirectory}/</code> to
        <code>file:${pom.basedir}/src/main/uml/</code> in mda\pom.xml.)
    </p>
    <ol>
        <li>Click <a href="http://archive.apache.org/dist/maven/binaries/apache-maven-2.0.8-bin.zip">here</a> to
            download Maven 2.0.8.</li>
        <li>Unzip this file at <code>C:\Program Files\Apache Software Foundation</code>. A directory
            called <code>maven-2.0.8</code> will be created which contains the Maven program.</li>
    </ol>
    <p>
        Note: If you are behind a proxy server, you will have to configure Maven to use
        the proxy. The details can be found <a href="http://maven.apache.org/guides/mini/guide-proxies.html"
            target="_blank">here</a>.
    </p>
    <h4>Install JBoss Application Server</h4>
    <p>
        <a href="http://labs.jboss.com/portal/jbossas" target="_blank">JBoss Application Server</a>
        is a widely used open source Java application server. Install JBoss 4.0.5 by following
        the steps below.
    </p>
    <ol>
        <li>Click <a href="http://labs.jboss.com/portal/jbossas/download" target="_blank">here</a>
            to point your browser to the JBoss download page.</li>
        <li>Click the <em>Download</em> button on the row that lists JBoss Application Server
            version 4.0.5. This should take you to the download page on the SourceForge site.</li>
        <li>Click on the link named "jboss-4.0.5.GA.zip" to download this file.</li>
        <li>Unzip this file at <code>C:\</code>. A directory called <code>jboss-4.0.5.GA</code>
            will be created which contains the JBoss application server. Rename this directory
            to <code>jboss-4.0.5</code> (just to make the name a little shorter).</li>
        <li>If you are planning to install the Oracle database on your machine, then you must
            change the JBoss HTTP port, which defaults to 8080. The reason is that Oracle also
            defaults to this port and it is not easy to change Oracle's configuration. In order
            to change JBoss' HTTP port, edit the file called <code>server.xml</code> under the
            directory <code>C:\jboss-4.0.5\server\default\deploy\jbossweb-tomcat55.sar</code>
            and change all occurences of the number "8080" to something else, say "9090". This
            will resolve the conflict between JBoss and Oracle. If you have followed this step
            then you must use port 9090 whenever you are instructed to use port 8080 in this
            tutorial.</li>
    </ol>
    <h4>Setup environment variables</h4>
    <p>
        We have seen earlier how to set environment variables such as <code>JAVA_HOME</code>,
        it is strongly recommended to set the following variables before continuing. We
        repeat <code>JAVA_HOME</code> here just for completeness.
    </p>
    <table>
        <tr>
            <th>Property</th>
            <th>Value</th>
            <th>Required?</th>
        </tr>
        <tr>
            <td>JAVA_HOME</td>
            <td>Java installation directory, e.g. <code>C:\Program Files\Java\jdk1.6.0_06</code></td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>JBOSS_HOME</td>
            <td>JBoss installation directory, e.g. <code>C:\jboss-4.0.5</code></td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>M2_HOME</td>
            <td>Maven installation directory, e.g. <code>C:\Program Files\Apache Software Foundation\maven-2.0.8</code></td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>M2_REPO</td>
            <td>Maven local repository, e.g. <code>C:\Documents and Settings\<strong>your user name</strong>\.m2\repository</code></td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>MAVEN_OPTS</td>
            <td>Parameters to pass to the Java VM when running Maven. Set this value to: <code>-XX:MaxPermSize=128m
                -Xmx512m</code> (required to build large Maven projects)</td>
            <td>No</td>
        </tr>
        <tr>
            <td>PATH</td>
            <td>This makes sure the system will search for console commands in the directories listed
                here. If this property already exists you should simply add <code>%JAVA_HOME%\bin;%M2_HOME%\bin</code>
            </td>
            <td>Yes</td>
        </tr>
    </table>
    <h4>Test Maven and create a local repository</h4>
    <p>
        Maven is based on the concept of a central, local repository located on your machine,
        where it stores artifacts such as 3rd party libraries as well as components created
        by you. When you create a new project, you must specify a Project Object Model (POM)
        in a file named <code>pom.xml</code>. In this file, you can tell Maven about the
        various 3rd party libraries and components your application depends on. When Maven
        starts to build the application, it will first fetch these dependencies from one
        or more remote repositories (generally located on the Internet) and store them in
        your local repository. This allows future builds to happen entirely locally. By
        default, the local repository is located at <code>C:\Documents and Settings\<strong>your
            user name</strong>\.m2\repository</code>. Note that so far we have installed
        only the Maven application, we have not created a local repository. Follow the steps
        below to test your Maven installation and force the creation of a local repository.
        We will use a standard Maven plugin to create a temporary project which we will
        delete later.
    </p>
    <ol>
        <li>Open a Command Prompt and change the current directory to any temporary directory,
            such as <code>C:\temp</code>.</li>
        <li>Execute the following command to make sure you can run Maven:<br />
            <code>mvn --version</code></li>
        <li>Maven should display the following output:<br />
            <code>Maven version: 2.0.8</code>.</li>
        <li>Now execute the following command to create a temporary project:<br />
            <code>mvn archetype:create -DgroupId=testapp -DartifactId=testapp</code><br />
            Make sure that you get a <code>BUILD SUCCESSFUL</code> message at the end. Sometimes
            due to bad Internet connectivity, Maven may not be able to download all dependencies.
            If your build fails due to this reason, try to issue the command again until you
            get a successful build.</li>
        <li>Verify that Maven created a temporary project called <code>testapp</code> in the
            current directory and also a local repository at the default location mentioned
            above. If both these results are achieved successfully, you can delete the temporary
            project that was just created.</li>
    </ol>
    <h4>Install AndroMDA Application plugin</h4>
    <p>
        Next we will download and install the AndroMDA Application plugin into your Maven
        repository. This plugin allows creation of Java starter applications that use AndroMDA.
        This is the only AndroMDA artifact that we will install explicitly. All other artifacts,
        such as AndroMDA cartridges, will be automatically downloaded by the Maven scripts
        generated by the plugin. Install the plugin by following the steps below.
    </p>
    <ol>
        <li>Click <a href="http://team.andromda.org/maven2/org/andromda/maven/plugins/andromdapp-maven-plugin/3.3/andromdapp-maven-plugin-install-3.3.zip">
            here</a> to download the the AndroMDA plugin installer.</li>
        <li>Unzip the contents of the installer into your Maven repository at <code>C:\Documents
            and Settings\<strong>your user name</strong>\.m2\repository</code>.</li>
        <li>Verify that the following directory was created:<br />
            <code>C:\Documents and Settings\<strong>your user name</strong>\.m2\repository\org\andromda\maven\plugins\andromdapp-maven-plugin</code></li>
        <li>Create a temporary directory, e.g. <code>C:\andromda-temp</code>.</li>
        <li>Create a file called <code>pom.xml</code> in this directory with the following content.
            <pre>
&lt;project&gt;

    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;samples.test&lt;/groupId&gt;
    &lt;artifactId&gt;test&lt;/artifactId&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;name&gt;test&lt;/name&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.andromda.profiles.uml14&lt;/groupId&gt;
            &lt;artifactId&gt;andromda-profile&lt;/artifactId&gt;
            &lt;type&gt;xml.zip&lt;/type&gt;
            &lt;version&gt;3.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.andromda.profiles.uml14&lt;/groupId&gt;
            &lt;artifactId&gt;andromda-profile&lt;/artifactId&gt;
            &lt;type&gt;xml.zip&lt;/type&gt;
            &lt;version&gt;3.3&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;defaultGoal&gt;compile&lt;/defaultGoal&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.andromda.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;andromdapp-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.3&lt;/version&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;andromda&lt;/id&gt;
            &lt;name&gt;AndroMDA Repository&lt;/name&gt;
            &lt;url&gt;http://team.andromda.org/maven2&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;andromda&lt;/id&gt;
            &lt;name&gt;AndroMDA Repository&lt;/name&gt;
            &lt;url&gt;http://team.andromda.org/maven2&lt;/url&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;

&lt;/project&gt;
            </pre>
        </li>
        <li>Open a Command Prompt in the directory where you created this <code>pom.xml</code>
            and run the command <code>mvn</code> without any arguments. Make sure the command
            completes successfully by displaying the <code>BUILD SUCCESSFUL</code> message.</li>
        <li>You can now delete the temporary directory you created in step 1.</li>
    </ol>
    <h4>Install a UML tool</h4>
    <p>
        Install a tool that will allow you to model your applications in UML and export
        these models into a format that AndroMDA can understand. AndroMDA currently supports
        UML 1.4/XMI 1.2 as well as UML 2/EMF. Please follow one of the links below to install
        the UML tool of your choice. Even if you have one of these tools installed, take
        a look at the appropriate page for important configuration information. (We invite
        UML tool vendors and open-source projects to test their tools with AndroMDA and
        supply installation instructions for inclusion in this section.)
    </p>
    <ul>
        <li><a href="/index.php?option=com_content&amp;task=view&amp;id=113&amp;Itemid=42"
            target="_blank">ArgoUML</a> (UML 1.4/XMI 1.2)</li>
        <li><a href="/index.php?option=com_content&amp;task=view&amp;id=114&amp;Itemid=42"
            target="_blank">MagicDraw 9.x</a> (UML 1.4/XMI 1.2)</li>
        <li><a href="/index.php?option=com_content&amp;task=view&amp;id=150&amp;Itemid=42"
            target="_blank">MagicDraw 15.5</a> (UML 2/EMF)</li>
        <li><a href="/index.php?option=com_content&amp;task=view&amp;id=158&amp;Itemid=42"
            target="_blank">RSM 6 (Rational Software Modeler/Architect)</a> (UML 2/EMF)</li>
    </ul>
    <h4>Install a database</h4>
    <p>
        Install a database that is supported by Hibernate. Click <a href="http://www.hibernate.org/80.html"
            target="_blank">here</a> to see the list of supported databases. For the purpose
        of this tutorial we will use MySQL 5.0, an open source database. If you install
        another database, then you will have to change JBoss and Hibernate configurations
        accordingly. Follow the steps below to install MySQL.
    </p>
    <ol>
        <li>Click <a href="http://dev.mysql.com/downloads/mysql/5.0.html" target="_blank">here</a>
            to go to the MySQL download page.</li>
        <li>Download the full Windows installation, specified as "Windows (x86)" (not just the
            "Essentials"). Install it at <code>C:\Program Files\MySQL\MySQL Server 5.0</code>.
            Record the database port, userid, and password for future use. You will need it
            each time you connect through the console, and when configuring the database connections
            in the tutorial.</li>
        <li>Download <a href="http://dev.mysql.com/downloads/gui-tools/5.0.html" target="_blank">
            MySQL GUI Tools Bundle</a> for GUI based administration and querying of your database.
            Install it at <code>C:\Program Files\MySQL\MySQL Tools for 5.0\</code></li>
        <li>Download <a href="http://dev.mysql.com/downloads/connector/j/5.0.html" target="_blank">
            MySQL Connector/J version 5.0.4</a>, the MySQL JDBC driver. Unzip it at <code>C:\Program
                Files\MySQL</code>.</li>
        <li>Copy the MySQL driver from <code>C:\Program Files\MySQL\mysql-connector-java-5.0.4\mysql-connector-java-5.0.4-bin.jar</code>
            to the JBoss lib directory located at <code>C:\jboss-4.0.5\server\default\lib</code>.
            Rename the copied file to <code>mysql-connector-java-5.0.4.jar</code>, removing
            the "-bin" to make it consistent with Maven naming conventions. (Recheck the target
            directory - JBoss has multiple lib directories under its root directory.) This allows
            JBoss to access your database.</li>
    </ol>
    <h4>Install Eclipse (Optional)</h4>
    <p>
        Eclipse is a popular open source IDE useful for developing Java applications. AndroMDA
        does not require Eclipse, but we recommend its use to increase your productivity.
        Eclipse users will glad to know that AndroMDA generates fully usable <code>.project</code>
        and <code>.classpath</code> files. Simply import the <code>.project</code> file
        and start editing your code in Eclipse.
    </p>
    <p>
        You can download Eclipse from <a href="http://www.eclipse.org/downloads/">here</a>.
        We recommend downloading the Eclipse Europa Package called "Eclipse IDE for Java
        EE Developers". Follow the steps below to install and configure Eclipse:
    </p>
    <ol>
        <li>Unzip the downloaded archive to a suitable location on your hard drive. The recommended
            location is <code>C:\eclipse</code>.</li>
        <li>Edit the file <code>eclipse.ini</code> under <code>C:\eclipse</code> to increase
            the memory available for Eclipse. Here are the suggested contents for this file:
            <pre>
-vmargs
-Xms256m
-Xmx512m
-XX:PermSize=64m
-XX:MaxPermSize=128m
            </pre>
        </li>
        <li>Start Eclipse by double-clicking on <code>eclipse.exe</code>.</li>
        <li>Eclipse asks for a folder where it can store your projects. This folder is called
            the Eclipse workspace. Set the workspace to a location where you generally creates
            projects, such as <code>C:\Projects</code>.</li>
        <li>Choose Preferences from the Window Menu.</li>
        <li>In the left pane, select Java > Build Path > Classpath Variables.</li>
        <li>Click New.</li>
        <li>Add <code>M2_REPO</code> in the Name field and the path of your M2 repository in
            the Path field (for example, <code>C:\Documents and Settings\<strong>your user name</strong>\.m2\repository</code>).
            This value is needed in order to import Maven generated project configurations.</li>
        <li>Click OK twice to close the dialog boxes.</li>
    </ol>
    <h3>What's Next?</h3>
    <p>
        Now that the development environment is set up, we are ready to try out the TimeTracker
        application. Click the <em>Next</em> link below to take a test drive.
    </p>
</body>
</html>
