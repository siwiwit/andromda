<?xml version="1.0" encoding="iso-8859-1"?>

<document>
    <properties>
        <author email="tfmorris@tigris.org">Tom Morris</author>
        <title>Create PeopleService using ArgoUML</title>
    </properties>

    <body>

        <section name="Create PeopleService using ArgoUML">
            <p>
                This page provides directions to create the PeopleService using ArgoUML. The model is
                shown below for your reference.
            </p>

            <p>
                <div align="center">
                    <img src="../../../images/argouml/PeopleService.png"/>
                </div>
            </p>

            <p>
              <ol>
                <li>In the TimeTracker model create a package called <code>service</code> under
                    <code>org.andromda.timetracker</code>. We will create our services in this package.</li>
                <li>Select the <code>service</code> package in the Explorer pane on the left and click
                    on the Class Diagram tool. In the Name: field of the property panel type
                    <code>Services</code> as the name of this diagram.</li>
                <li>Add a new class to the diagram and name it <code>PeopleService</code>.</li>
                <li>Add the stereotype called Service to <code>PeopleService</code>.</li>
                <li>Add three methods to <code>PeopleService</code> as shown above. You don't need to
                    type the <code>{sequential></code> as part of the specification -- it is
                    the default.  As with the attributes, you can also create and specify methods
                    from the property panel if you prefer.</li>
                <li>From the Explorer pane on the left, drag the <code>Person</code> class on to the diagram.</li>
                <li>Create a dependency from <code>PeopleService</code> to <code>Person</code>.</li>
                <li>Make sure your class diagram matches the one shown above.</li>
                <li>Save the model by selecting File > Save Project.</li>
              </ol>
            </p>

            <p>
              We are now ready to generate code for the <code>PeopleService</code>. Please go back to the main
              tutorial page and continue from where you left off.
            </p>
            <p><emph>NOTE:</emph>If you are using AndroMDA 3.1 you will need to adjust the code
              that is given on the main tutorial page.</p>

<source language="java">
protected  java.lang.Long handleCreatePerson(org.andromda.timetracker.vo.PersonVO personVO)
    throws java.lang.Exception
{
    Person person = Person.Factory.newInstance();
    // The following line differs for AndroMDA 3.1 vs 3.2
    //getPersonDao().personVOToEntity(personVO, person, true); // AndroMDA 3.2
    getPersonDao().personVOToEntity(personVO);               // AndroMDA 3.1
    getPersonDao().create(person);
    return person.getId();
}
</source>

            <p>You will also need to provide implementations for the methods in the
              class <code>domain.PersonDaoImpl</code> which marshall and unmarshal
              data for the value object PersonVO.</p>

<source language="java">
/**
 * @see org.andromda.timetracker.domain.PersonDao#toPersonVO(org.andromda.timetracker.domain.Person)
 */
public org.andromda.timetracker.vo.PersonVO toPersonVO(final org.andromda.timetracker.domain.Person entity)
{
    org.andromda.timetracker.vo.PersonVO pvo =
        new org.andromda.timetracker.vo.PersonVO();
    pvo.setId(entity.getId());
    pvo.setUsername(entity.getUsername());
    pvo.setFirstName(entity.getFirstName());
    pvo.setLastName(entity.getLastName());
    return pvo;
}

/**
 * @see org.andromda.timetracker.domain.PersonDao#personVOToEntity(org.andromda.timetracker.vo.PersonVO)
 */
public org.andromda.timetracker.domain.Person personVOToEntity(org.andromda.timetracker.vo.PersonVO personVO)
{
    org.andromda.timetracker.domain.Person person =
        new org.andromda.timetracker.domain.Person.Factory().newInstance();
    person.setId(personVO.getId());
    person.setUsername(personVO.getUsername());
    person.setFirstName(personVO.getFirstName());
    person.setLastName(personVO.getLastName());
    return person;
}
</source>
        </section>

    </body>
</document>
