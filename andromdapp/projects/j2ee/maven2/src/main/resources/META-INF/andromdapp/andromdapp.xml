<andromdapp type="j2ee" root="$applicationParentDirectory/$applicationId">
    <resourceLocations>
        <location>templates/j2ee/maven2</location>      
    </resourceLocations>
    <conditionalOutput>
        <conditions>
            <condition id="ear" equal="true"/>           
            <output patterns="**/*">app/</output>  
        </conditions>
        <conditions>
            <condition id="workflow" equal="true"/>           
            <output patterns="**/*">workflow/</output>  
        </conditions>
        <conditions>
            <condition id="webservice" equal="true"/>   
            <condition id="ear" equal="true"/>         
            <output patterns="**/*">webservice/</output>  
        </conditions>
        <conditions>
            <condition id="web" equal="true"/>       
            <output patterns="**/*">web/</output>  
        </conditions>
        <conditions>
            <condition id="model" present="false"/>        
            <output>mda/src/main/uml/${applicationId}.xmi.vsl</output>  
        </conditions>
        <conditions>
            <condition id="configurationUri" present="false"/>        
            <output>mda/conf/andromda.xml</output>  
        </conditions>
        <conditions>
            <condition id="transactionPersistenceType" notEqual="none"/>        
            <output patterns="**/*">core</output>    
        </conditions>
    </conditionalOutput>
    <mappings>
        <mapping>
            <from>empty-model.xmi</from>
            <to>${applicationId}.xmi.vsl</to>
        </mapping>
        <mapping>
            <from>ejb-jar.xml</from>
            <to>target/classes/META-INF/ejb-jar.xml</to>
        </mapping>
        <mapping>
            <from>web/web.xml</from>
            <to>web/target/${applicationId}-web-${applicationVersion}/WEB-INF/web.xml</to>
        </mapping>
        <mapping>
            <from>webservice/web.xml</from>
            <to>webservice/target/${applicationId}-webservice-${applicationVersion}/WEB-INF/web.xml</to>
        </mapping>
    </mappings>
    <instructions>readme.txt</instructions>
    <templateEngine className="org.andromda.templateengines.velocity.VelocityTemplateEngine" extensions="vsl"/>
    <templateObject name="stringUtils" className="org.apache.commons.lang.StringUtils"/>
    <prompts>
        <promptGroup name="Basic Project Information">
            <documentation>
                Provides the basic project information.
            </documentation>
            <prompt id="applicationParentDirectory">
                <text>Please enter the location in which your new application will be created (i.e. f:/java/development)</text>
            </prompt>
            <prompt id="author">
                <text>Please enter your first and last last name (i.e. Chad Brandon)</text>
            </prompt>
            <prompt id="applicationName">
                <text>Please enter the name of your J2EE project (i.e. Animal Quiz)</text>
            </prompt>
            <prompt id="applicationId">
                <text>Please enter an id for your J2EE project (i.e. animalquiz)</text>
            </prompt>
            <prompt id="applicationVersion">
                <text>Please enter a version for your project (i.e. 1.0-SNAPSHOT)</text>
            </prompt>
            <prompt id="applicationPackage">
                <text>Please enter the root package name for your J2EE project (i.e. org.andromda.samples.animalquiz)</text>
            </prompt>
            <prompt id="applicationType" setResponseAsTrue="true">
                <text>Would you like an EAR or standalone WAR?</text>
                <responses>
                    <response>ear</response>
                    <response>war</response>
                </responses>
                <conditions>
                    <condition equal="war">
                        <setProperty id="transactionPersistenceType">spring</setProperty>
                    </condition>
                </conditions>
            </prompt>
        </promptGroup>
        <promptGroup name="Component Types">
            <documentation>
                Provides the choice of components with the application.
            </documentation>        
            <prompt id="transactionPersistenceType" setResponseAsTrue="true">
                <text>Please enter the type of transactional/persistence cartridge to use</text>
                <responses>
                    <response>hibernate</response>
                    <response>ejb</response>
                    <response>spring</response>
                    <response>none</response>
                </responses>
            </prompt>
            <prompt id="workflow">
                <text>Will your project need workflow engine capabilities? (it uses jBPM and Hibernate3)?</text>
                <responses type="java.lang.Boolean">
                    <response>yes</response>
                    <response>no</response>
                </responses>
                <conditions>
                    <condition equal="yes">
                        <setProperty id="hibernateVersion">3</setProperty>
                    </condition>
                </conditions>
            </prompt>
            <prompt id="hibernateVersion">
                <text>Please enter the hibernate version number  (enter '2' for 2.1.x or '3' for 3.0.x)</text>
                <preconditions type="or">
                    <condition id="transactionPersistenceType" equal="spring"/>
                    <condition id="transactionPersistenceType" equal="hibernate"/>
                </preconditions>
                <responses>
                    <response>2</response>
                    <response>3</response>
                </responses>
            </prompt>
            <prompt id="web">
                <text>Will your project have a web user interface?</text>
                <responses type="java.lang.Boolean">
                    <response>yes</response>
                    <response>no</response>
                </responses>
            </prompt>
            <prompt id="webType" setResponseAsTrue="true">
                <text>Would you like your web user interface to use JSF or Struts?</text>
                <preconditions>
                    <condition id="web" equal="true"/>
                </preconditions>
                <responses>
                    <response>jsf</response>
                    <response>struts</response>
                </responses>
            </prompt>
            <prompt id="webservice">
                <text>Would you like to be able to expose your services as web services?</text>
                <responses type="java.lang.Boolean">
                    <response>yes</response>
                    <response>no</response>
                </responses>
            </prompt>
        </promptGroup>
    </prompts>
</andromdapp>